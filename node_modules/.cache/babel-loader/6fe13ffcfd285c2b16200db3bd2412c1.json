{"ast":null,"code":"import _objectSpread from \"/home/rafaelbritez/Desktop/redux/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/rafaelbritez/Desktop/redux/src/pages/Home/index.js\";\nimport React, { Component } from 'react';\nimport { ProductList, AddButton } from './styles';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { MdAddShoppingCart } from 'react-icons/md';\nimport { FaSpinner } from 'react-icons/fa';\nimport * as CartActions from '../../store/modules/cart/actions';\nimport { formatPrice } from '../../util/format';\nimport api from '../../services/api';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: [],\n      loading: false\n    };\n\n    this.handleAddProduct = id => {\n      this.setState({\n        loading: true\n      });\n      const addToCartRequest = this.props.addToCartRequest;\n      addToCartRequest(id);\n      this.setState({\n        loading: true\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const response = await api.get('products');\n    const data = response.data.map(product => _objectSpread({}, product, {\n      priceFormatted: formatPrice(product.price)\n    }));\n    this.setState({\n      products: data\n    });\n  }\n\n  render() {\n    const products = this.state.products;\n    const amount = this.props.amount;\n    return React.createElement(ProductList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, products.map(product => React.createElement(\"li\", {\n      key: product.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: product.image,\n      alt: product.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, product.title), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, product.priceFormatted), React.createElement(AddButton, {\n      loading: loading,\n      onClick: () => this.handleAddProduct(product.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(MdAddShoppingCart, {\n      size: 16,\n      color: \"#fff\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), amount[product.id]), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"ADICIONAR AO CARRINHO\")))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  amount: state.cart.reduce((amount, product) => {\n    amount[product.id] = product.amount || 0;\n    return amount;\n  }, {})\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators(CartActions, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/home/rafaelbritez/Desktop/redux/src/pages/Home/index.js"],"names":["React","Component","ProductList","AddButton","connect","bindActionCreators","MdAddShoppingCart","FaSpinner","CartActions","formatPrice","api","Home","state","products","loading","handleAddProduct","id","setState","addToCartRequest","props","componentDidMount","response","get","data","map","product","priceFormatted","price","render","amount","image","title","mapStateToProps","cart","reduce","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {ProductList, AddButton} from './styles';\nimport {connect} from  'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {MdAddShoppingCart} from 'react-icons/md';\nimport {  FaSpinner } from 'react-icons/fa';\nimport * as CartActions from '../../store/modules/cart/actions';\nimport{formatPrice} from '../../util/format';\nimport api from '../../services/api';\n\n class Home extends Component{\n  state = {\n    products:[],\n    loading:false,\n  };\n\n  async componentDidMount(){\n\n\n    const response = await api.get('products');\n\n    const data = response.data.map(product=> ({\n      ...product,\n      priceFormatted: formatPrice(product.price),\n    }));\n\n    this.setState({ products: data,\n    });\n  }\n\n  handleAddProduct = id=>{\n    this.setState({loading:true});\n    const { addToCartRequest } = this.props;\n    addToCartRequest(id);\n    this.setState({loading:true});\n  };\n\n  render(){\n    const { products } = this.state;\n    const {amount} = this.props\n    return(\n      <ProductList>\n        { products.map(product =>(\n          <li key={product.id}>\n            <img src={product.image} alt={product.title}/>\n            <strong>{product.title}</strong>\n          <span>{product.priceFormatted}</span>\n              <AddButton\n              loading={loading}\n              onClick={()=>this.handleAddProduct(product.id)}\n            >\n              <div>\n              <MdAddShoppingCart size={16} color=\"#fff\"/>{amount[product.id]}\n              </div>\n              <span>ADICIONAR AO CARRINHO</span>\n            </AddButton>\n          </li>\n\n        ))}\n      </ProductList>\n\n  );\n  }\n}\nconst mapStateToProps = state => ({\n  amount: state.cart.reduce((amount,product)=>{\n   amount[product.id] = product.amount || 0;\n\n   return amount;\n },{}),\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators(CartActions,dispatch)\n\nexport default connect(mapStateToProps,mapDispatchToProps, )(Home);\n"]},"metadata":{},"sourceType":"module"}